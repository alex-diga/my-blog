---
title: HTTP 知识体系
date: 2022-06-06
---

## HTTP 报文结构

HTTP 结构是由`header + body`组成的，具体而言是`起始行 + 头部 + 空行 + 实体`。HTTP 的`请求报文`和`响应报文`有区别

### 起始行

对于请求报文起始行类似`GET /home HTTP/1.1`即`方法 + 路径 + http版本`组成

对于响应报文起始行是`HTTP/1.1 200 OK`，也叫状态行，由`HTTP版本 + 状态码 + 原因`组成

> 值得注意的是，在起始行中，每两个部分之间用空格隔开，最后一个部分后面接一个换行，严格遵循`ABNF`语法规范

### 头部

头部字段格式：

1. 字段名不区分大小写
2. 字段名不允许出现空格，不可以出现下划线`_`
3. 字段名后面必须紧接着`:`

### 空格

`空格`很重要，用来区分`头部`和`实体`

### 实体

实体是具体的数据即`body`部分，`请求报文`对应`请求体`，`响应报文`对应`响应体`

## HTTP 请求方法

`HTTP/1.1`规定了以下请求方法（注意都是大写）

1. `GET`通常用来获取资源
2. `HEAD`获取资源的元信息
3. `POST`提交数据即上次数据
4. `PUT`修改数据
5. `DELETE`删除资源
6. `CONNECT`建立链接隧道，用于代理服务器
7. `OPTIONS`列出可对资源实行的请求方法，用来跨域请求
8. `TRACE`追踪请求-响应的传输路径

### GET 和 POST 的区别

- 从缓存的角度，GET 请求会被浏览器主动缓存下来，留下历史记录，而 POST 默认不会
- 从编码的角度，GET 只能进行 URL 编码，只能接受 ASCII 字符，而 POST 没有限制
- 从参数的角度，GET 一般放在 URL 中，因此不安全，POST 放在请求体中，更适合传输敏感信息
- 从幂等性的角度，GET 是幂等的，而 POST 不是（幂等表示执行相同的操作，结果也是相同的）
- 从 TCP 的角度，GET 请求会把请求报文一次性发出去，而 POST 会分为两个 TCP 数据包，首先发 header 部分，如果服务器响应 100(continue) 然后发 body 部分（火狐浏览器除外，它的 POST 请求只发一个 TCP 包）

## URI

`URI`全称为(Uniform Resource Identifier)即`统一资源标识符`，它的作用是区分互联网上的不同资源

`URI`并不是常说的网址，网址指的是`URL`，实际上`URI`包含`URN`和`URL`两个部分

### URI 编码

`URI`只能用`ASCII`，`ASCII`之外的字符不支持显示，而且还有一部分字符号是界定符，如果不加以处理就会导致解析出错。所以`URI`引入`编码`机制，将所有非`ASCII码`和`界定符`转为十六进制字节值，然后在前面加个`%`

## HTTP 状态码

RFC 规定了 HTTP 的状态码为三位数，分为五类：

- `1xx`表示目前是协议处理的中间状态，还需要后续操作
- `2xx`表示成功状态
- `3xx`表示重定向状态、资源位置发生变动，需要重新请求
- `4xx`表示报文有错
- `5xx`表示服务端发生错误

## 参考

1. [HTTP 灵魂之问](https://juejin.cn/post/6844904100035821575)
